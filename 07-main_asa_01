
conf t

hostname main-asa-01

ntp server 172.17.1.126

enable password passwd level 15
username admin password passwd

aaa authentication ssh console LOCAL
aaa authentication tel console LOCAL

domain-name my.local
crypto key generate rsa general-keys modulus 1024
yes

interface GigabitEthernet1/1
description MAIN_BORDER_01
nameif OUTSIDE
security-level 0
ip address 172.16.1.6 255.255.255.252
no shutdown 
exit

interface GigabitEthernet1/2
description MAIN_CORE_SW_01
nameif INSIDE
security-level 100
ip address 172.16.1.13 255.255.255.252
no shutdown 
exit

ssh 172.17.1.126 255.255.255.128 INSIDE 

router ospf 65528
router-id 0.1.2.1
area 1 nssa no-summary
network 172.16.1.4 255.255.255.252 area 1
network 172.16.1.12 255.255.255.252 area 1
exit

policy-map global_policy
class inspection_default
no inspect ftp
no inspect tftp
no inspect dns preset_dns_map
inspect icmp
inspect http
inspect dns
exit

no policy-map type inspect dns preset_dns_map

object-group service INFR_OBJ
service-object tcp-udp
service-object icmp
exit
conf t

object-group service AP_OBJ
service-object tcp-udp
service-object icmp
exit
conf t

object-group service WEB_OBJ
service-object tcp destination eq 80
service-object tcp destination eq 443
exit
conf t

object-group service DNS_OBJ
service-object udp source eq 53
exit
conf t

object-group service VOIP_OBJ
service-object tcp-udp
service-object icmp
exit
conf t

object-group service USERS_OBJ
service-object tcp-udp
service-object icmp
exit
conf t

access-list OUTSIDE_ACL extended permit object-group INFR_OBJ 172.16.0.0 255.240.0.0 host 172.17.1.126
access-list OUTSIDE_ACL extended permit object-group AP_OBJ host 172.18.1.60 host 172.17.1.125
access-list OUTSIDE_ACL extended permit object-group WEB_OBJ any 172.16.100.0 255.255.255.192
access-list OUTSIDE_ACL extended permit object-group DNS_OBJ host 8.8.8.8 host 172.17.1.126
access-list OUTSIDE_ACL extended permit object-group VOIP_OBJ 172.18.4.0 255.255.255.192 172.17.4.0 255.255.255.0
access-list OUTSIDE_ACL extended permit object-group USERS_OBJ 172.18.2.0 255.255.255.128 172.17.5.0 255.255.255.128

access-group OUTSIDE_ACL in interface OUTSIDE

exit

write memory

exit

